{"ast":null,"code":"import _defineProperty from\"/Users/raymondhear/Documents/ms_cs/csci_6221/advanced_software_paradigms_golang_project/static/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/raymondhear/Documents/ms_cs/csci_6221/advanced_software_paradigms_golang_project/static/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/raymondhear/Documents/ms_cs/csci_6221/advanced_software_paradigms_golang_project/static/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raymondhear/Documents/ms_cs/csci_6221/advanced_software_paradigms_golang_project/static/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raymondhear/Documents/ms_cs/csci_6221/advanced_software_paradigms_golang_project/static/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useAuth0}from\"../react-auth0-spa\";import{FiThumbsUp,FiThumbsDown}from\"react-icons/fi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoggedIn=function LoggedIn(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({\"world-of-authcraft\":\"\",\"ocean-explorer\":\"\",\"dinosaur-park\":\"\",\"cars-vr\":\"\",\"robin-hood\":\"\",\"real-world-vr\":\"\"}),_useState4=_slicedToArray(_useState3,2),voted=_useState4[0],setVoted=_useState4[1];var _useAuth=useAuth0(),getTokenSilently=_useAuth.getTokenSilently,loading=_useAuth.loading,user=_useAuth.user,logout=_useAuth.logout,isAuthenticated=_useAuth.isAuthenticated;useEffect(function(){var getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var token,response,responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return getTokenSilently();case 3:token=_context.sent;_context.next=6;return fetch(\"http://localhost:8080/products\",{headers:{Authorization:\"Bearer \".concat(token)}});case 6:response=_context.sent;_context.next=9;return response.json();case 9:responseData=_context.sent;setProducts(responseData);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function getProducts(){return _ref.apply(this,arguments);};}();getProducts();},[]);var vote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(slug,type,index){var token,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return getTokenSilently();case 3:token=_context2.sent;_context2.next=6;return fetch(\"http://localhost:8080/products/\".concat(slug,\"/feedback\"),{method:\"POST\",headers:{Authorization:\"Bearer \".concat(token)},body:JSON.stringify({vote:type})});case 6:response=_context2.sent;// Since this is just for demonstration and we're not actually\n// persisting this data, we'll just set the product vote status here\n// if the product exists\nif(response.ok){setVoted(_objectSpread(_objectSpread({},voted),{},_defineProperty({},slug,[type])));}else console.log(response.status);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function vote(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();if(loading||!user){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron text-center mt-5\",children:[isAuthenticated&&/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-primary float-right\",onClick:function onClick(){return logout();},children:\"LOG OUT\"}),/*#__PURE__*/_jsx(\"spacer\",{type:\"horizontal\",width:\"100\",height:\"100\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Go Language Evaluation\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h2\",{children:\"Austin Gerner and Raymond Hear\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Advanced Software Paradigms (CSCI 6221)\"}),/*#__PURE__*/_jsx(\"spacer\",{type:\"horizontal\",width:\"100\",height:\"100\",children:\" \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Hi, \",user.name,\"! This is a mock application to test Go's potential use in production.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:products.map(function(product,index){var prodSlug=product.Slug;return/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:product.Name}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:product.Description}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer\",children:[/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return vote(product.Slug,\"Upvoted\",index);},className:\"btn btn-default float-left\",children:/*#__PURE__*/_jsx(FiThumbsUp,{})}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:voted[prodSlug]}),/*#__PURE__*/_jsx(\"a\",{onClick:function onClick(){return vote(product.Slug,\"Downvoted\",index);},className:\"btn btn-default float-right\",children:/*#__PURE__*/_jsx(FiThumbsDown,{})})]})]})},index);})})]})});};export default LoggedIn;","map":{"version":3,"sources":["/Users/raymondhear/Documents/ms_cs/csci_6221/advanced_software_paradigms_golang_project/static/src/components/LoggedIn.js"],"names":["React","useState","useEffect","useAuth0","FiThumbsUp","FiThumbsDown","LoggedIn","products","setProducts","voted","setVoted","getTokenSilently","loading","user","logout","isAuthenticated","getProducts","token","fetch","headers","Authorization","response","json","responseData","console","error","vote","slug","type","index","method","body","JSON","stringify","ok","log","status","name","map","product","prodSlug","Slug","Name","Description"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useAuth0 } from \"../react-auth0-spa\";\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\n\nconst LoggedIn = () => {\n  const [products, setProducts] = useState([]);\n  const [voted, setVoted] = useState({\n    \"world-of-authcraft\": \"\",\n    \"ocean-explorer\": \"\",\n    \"dinosaur-park\": \"\",\n    \"cars-vr\": \"\",\n    \"robin-hood\": \"\",\n    \"real-world-vr\": \"\",\n  });\n\n  const {\n    getTokenSilently,\n    loading,\n    user,\n    logout,\n    isAuthenticated,\n  } = useAuth0();\n\n  useEffect(() => {\n    const getProducts = async () => {\n      try {\n        const token = await getTokenSilently();\n        // Send a GET request to the server and add the signed in user's\n        // access token in the Authorization header\n        const response = await fetch(\"http://localhost:8080/products\", {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        });\n\n        const responseData = await response.json();\n\n        setProducts(responseData);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    getProducts();\n  }, []);\n\n  const vote = async (slug, type, index) => {\n    try {\n      const token = await getTokenSilently();\n      // Send a POST request to the Go server for the selected product\n      // with the vote type\n      const response = await fetch(\n        `http://localhost:8080/products/${slug}/feedback`,\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n          body: JSON.stringify({ vote: type }),\n        }\n      );\n      // Since this is just for demonstration and we're not actually\n      // persisting this data, we'll just set the product vote status here\n      // if the product exists\n      if (response.ok) {\n        setVoted({\n          ...voted,\n          [slug]: [type],\n        });\n      } else console.log(response.status);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  if (loading || !user) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div className=\"container\">\n      <div className=\"jumbotron text-center mt-5\">\n        {isAuthenticated && (\n          <span\n            className=\"btn btn-primary float-right\"\n            onClick={() => logout()}\n          >\n            LOG OUT\n          </span>\n        )}\n        <spacer type=\"horizontal\" width=\"100\" height=\"100\"></spacer>\n        <h1>Go Language Evaluation</h1>\n        <hr></hr>\n        <h2>Austin Gerner and Raymond Hear</h2>\n        <h3>Advanced Software Paradigms (CSCI 6221)</h3>\n        <spacer type=\"horizontal\" width=\"100\" height=\"100\"> </spacer>\n        <br></br>\n        <p>\n          Hi, {user.name}! This is a mock application to test Go's potential use in production.\n        </p>\n        <div className=\"row\">\n          {products.map(function (product, index) {\n            const prodSlug = product.Slug;\n            return (\n              <div className=\"col-sm-4\" key={index}>\n                <div className=\"card mb-4\">\n                  <div className=\"card-header\">{product.Name}</div>\n                  <div className=\"card-body\">{product.Description}</div>\n                  <div className=\"card-footer\">\n                    <a onClick={() => vote(product.Slug, \"Upvoted\", index)}\n                      className=\"btn btn-default float-left\">\n                      <FiThumbsUp />\n                    </a>\n                    <small className=\"text-muted\">{voted[prodSlug]}</small>\n                    <a onClick={() => vote(product.Slug, \"Downvoted\", index)}\n                      className=\"btn btn-default float-right\">\n                      <FiThumbsDown />\n                    </a>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LoggedIn;"]},"metadata":{},"sourceType":"module"}